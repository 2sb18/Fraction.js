/*
 Fraction.js v1.0.0 12/03/2014
 http://www.xarg.org/2014/03/precise-calculations-in-javascript/

 Copyright (c) 2014, Robert Eisele (robert@xarg.org)
 Dual licensed under the MIT or GPL Version 2 licenses.
*/
function Fraction(n){function q(a,b){if(0===b%2)return q(a,b/2);if(0===b%5)return q(a,b/5);for(var c=1;c<=b;c++)if(1===r(c,b))return c;return 0}function r(a,b){for(var c=10,d=1;0<a;c=c*c%b,a>>=1)a&1&&(d=d*c%b);return d}function g(a,l){if(!l)throw"DIV/0";b.s=(0<=a)-(0>a);a=Math.abs(a);l=Math.abs(l);for(var c=a,d=l,h;d;)h=d,d=c%d,c=h;b.n=a/c;b.d=l/c;return b}function k(a){var b=0,c=1,d=1;if(1===a.length)a=a[0];else if(2!==a.length)throw"Parameter mismatch";switch(typeof a){case "object":if(null===a)break;
else if(void 0!==a[0]&&void 0!==a[1]){b=a[0];c=a[1];d=b*c;break}else if("d"in a&&"n"in a){b=a.n;c=a.d;d=b*c;void 0!==a.s&&(d*=a.s);break}else if("z"in a&&"n"in a){b=a.z;c=a.n;d=b*c;break}else throw"Unknown format";case "string":a=a.replace(/^[\s]+/g,"").replace(/[\s]+$/,"").replace(",","");case "number":b=(""+a).split("");a=[0,0,0,0,0];for(var c=[0,0,0,0,0],h,e=0,f=0;f<b.length;f++)if("."===b[f])if(0===e)e++;else throw"Corrupted number";else if("("===b[f]||"'"===b[f]||")"===b[f])if(0<e&&3>e)e++;else throw"Corrupted number";
else if(0===f&&"-"===b[0])d=-1;else if(3>e){h=parseInt(b[f],10);if(isNaN(h))throw"Corrupted number";a[e]=10*a[e]+h;c[e]++}else throw"Corrupted number";if(2===e)throw"Corrupted number";a[3]=Math.pow(10,c[1]);a[4]=0<a[2]?Math.pow(10,c[2])-1:1;b=a[2]+a[4]*(a[0]*a[3]+a[1]);c=a[3]*a[4];break;default:throw"Unknown type";}c||g(0,0);p.n=Math.abs(b);p.d=Math.abs(c);p.s=(0<=d)-(0>d);return p}var p={n:0,d:0,s:0},b=this;b.abs=function(){b.s=1;return b};b.add=function(a){a=k(arguments);return g(b.s*b.n*a.d+a.s*
b.d*a.n,b.d*a.d)};b.sub=function(a){a=k(arguments);return g(b.s*b.n*a.d-a.s*b.d*a.n,b.d*a.d)};b.mul=function(a){a=k(arguments);return g(b.s*a.s*b.n*a.n,b.d*a.d)};b.div=function(a){a=k(arguments);return g(b.s*a.s*b.n*a.d,b.d*a.n)};b.set=function(a){a=k(arguments);return g(a.s*a.n,a.d)};b.mod=function(a){a=k(arguments);return 0===a.n*b.d?g(0,0):g(b.s*a.d*b.n%(a.n*b.d),a.d*b.d)};b.reciprocal=function(){return g(b.s*b.d,b.n)};b.equals=function(a){a=k(arguments);return a.s*a.n*b.d===b.s*b.n*a.d};b.divisible=
function(a){a=k(arguments);return 0===a.n*b.d?!1:0===b.n*a.d%(a.n*b.d)};b.toString=function(){var a=(""+b.n).split(""),g=b.d,c=0,d="",h=q(b.n,b.d),e;a:{e=b.d;for(var f=0;f<e;f++)if(r(f,e)===r(f+h,e)){e=f;break a}e=0}for(var f=-1,k=10+h+e+a.length,m=0;m<k;m++){c*=10;m<a.length?c+=parseInt(a[m],10):m===a.length?(d+=".",f=0):f++;if(0<h&&f===e)d+="(";else if(0<h&&f-e===h){d+=")";break}c>=g?(d+=c/g|0,c%=g):d+="0"}return(~b.s?"":"-")+d.replace(/^0+([1-9]|0\.)/g,"$1").replace(/(\d)0+$/,"$1")};b.n=0;b.d=
b.s=1;n=k(arguments);g(n.s*n.n,n.d)}"undefined"!==typeof module&&module.exports&&(module.exports.Fraction=Fraction);
